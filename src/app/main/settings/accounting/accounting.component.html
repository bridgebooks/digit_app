<section>
  <a routerLink="/settings"><clr-icon shape="caret" dir="left"></clr-icon> General Settings</a>
  <h2>Accounting</h2>

  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      <div class="card">
        <form novalidate #form="ngForm" autocomplete="off" (submit)="save()">
          <div class="card-block">
              <div class="progress progress-fade top loop" *ngIf="loading"><progress></progress></div>
              <div class="card-text" *ngIf="!loading">
                <p>Manage which accounts to use for invoices, and tax.</p>
                <section class="form-block">
                    <div class="form-group">
                      <label for="">Accounts Recievable</label>
                      <account-select [org]="org" [selected]="model.values.accounts_receivable" 
                      (onAccountSelected)="model.values.accounts_receivable = $event"></account-select>
                      <input type="hidden" name="accounts_recievable" [(ngModel)]="model.values.accounts_receivable" required>
                      <a href="#" role="tooltip" aria-haspopup="true" class="tooltip tooltip-lg">
                        <clr-icon shape="info-circle" size="24"></clr-icon>
                        <span class="tooltip-content">Select an account for unpaid sales invoices</span>
                      </a>
                    </div>

                    <div class="form-group">
                      <label for="">Accounts Payable</label>
                      <account-select [org]="org" [selected]="model.values.accounts_payable" 
                      (onAccountSelected)="model.values.accounts_payable = $event"></account-select>
                      <input type="hidden" name="accounts_payable" [(ngModel)]="model.values.accounts_payable" required>
                      <a href="#" role="tooltip" aria-haspopup="true" class="tooltip tooltip-lg">
                        <clr-icon shape="info-circle" size="24"></clr-icon>
                        <span class="tooltip-content">Select an account for unpaid bills</span>
                      </a>
                    </div>

                    <div class="form-group">
                      <label for="">Sales Tax</label>
                      <account-select [org]="org" [selected]="model.values.sales_tax" 
                      (onAccountSelected)="model.values.sales_tax = $event"></account-select>
                      <input type="hidden" name="sales_tax" [(ngModel)]="model.values.sales_tax" required>
                      <a href="#" role="tooltip" aria-haspopup="true" class="tooltip tooltip-lg">
                        <clr-icon shape="info-circle" size="24"></clr-icon>
                        <span class="tooltip-content">Select an account for unpaid sales tax</span>
                      </a>
                    </div>

                    <div class="form-group">
                      <label for="">Wages</label>
                      <account-select [org]="org" [selected]="model.values.wages" 
                      (onAccountSelected)="model.values.wages = $event"></account-select>
                      <input type="hidden" name="wages" [(ngModel)]="model.values.wages" required>
                      <a href="#" role="tooltip" aria-haspopup="true" class="tooltip tooltip-lg">
                        <clr-icon shape="info-circle" size="24"></clr-icon>
                        <span class="tooltip-content">Select an account for wages and salaries</span>
                      </a>
                    </div>

                    <hr>
                    <p>Financial Year End</p>
                    <div class="form-group">
                      <label for="">Day of Month</label>
                      <div class="select">
                        <select name="financial_year_end_day" id="" [(ngModel)]="model.values.financial_year.day">
                          <option [value]="day" *ngFor="let day of days">{{ day }}</option>
                        </select>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="">Month</label>
                      <div class="select">
                        <select name="financial_year_end_month" id="" [(ngModel)]="model.values.financial_year.month">
                          <option [value]="month.value" *ngFor="let month of months">{{ month.label }}</option>
                        </select>
                      </div>
                    </div>
                </section>                        
              </div>
          </div>
          <div class="card-footer">
              <div class="progress progress-fade loop" *ngIf="processing"><progress></progress></div>              
              <button class="btn btn-primary" [clrLoading]="processing" [disabled]="form.invalid || processing || loading">Save</button>          
            </div>
        </form>
      </div>
    </div>
  </div>
</section>